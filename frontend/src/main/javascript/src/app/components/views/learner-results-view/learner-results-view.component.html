<div class="view">
    <view-header [title]="'Results'"></view-header>

    <action-bar>
        <div ng-if="vm.results.length > 0" class="d-flex flex-row align-items-center">
            <selectable-checkbox-multiple [selectable]="vm.selectedResults"></selectable-checkbox-multiple>

            <div class="ml-3">
                <button
                    class="btn btn-sm btn-primary mr-2"
                    ng-click="vm.openSelectedResults()"
                    ng-disabled="!vm.selectedResults.isAnySelected()"
                >
                    Compare
                </button>
                <button
                    class="btn btn-sm btn-default mr-2"
                    ng-click="vm.deleteResults()"
                    ng-disabled="!vm.selectedResults.isAnySelected()"
                >
                    Delete
                </button>

                <div class="btn-group btn-group-sm" uib-dropdown>
                    <button
                        class="btn btn-default btn-dropdown"
                        uib-dropdown-toggle
                        ng-disabled="!vm.selectedResults.isAnySelected()"
                    >
                        Statistics
                    </button>
                    <div uib-dropdown-menu class="dropdown-menu dropdown-menu-left" role="menu">
                        <a class="dropdown-item" href="" ng-click="vm.showSelectedStatistics()">
                            <i class="fas fa-fw fa-chart-bar"></i> Show statistics
                        </a>
                        <a class="dropdown-item" href="" ng-click="vm.exportSelectedAsCSV()">
                            <i class="fas fa-fw fa-download"></i> Export statistics
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </action-bar>

    <div class="view-body has-sub-nav">
        <div class="container-fluid">

            <div class="list-group" ng-if="vm.results.length > 0">
                <div class="list-group-item" ng-repeat="result in vm.results | orderBy:'-testNo':false">
                    <learner-result-list-item result="result" selectable="vm.selectedResults">
                        <div class="btn-group btn-group-xs" uib-dropdown>
                            <button type="button" class="btn btn-default btn-icon dropdown-toggle no-caret" uib-dropdown-toggle>
                                <i class="fas fa-bars"></i>
                            </button>
                            <div uib-dropdown-menu class="dropdown-menu dropdown-menu-right" role="menu">
                                <a class="dropdown-item" href="{{'#!/projects/' + result.project + '/learner/learn'}}">
                                    <i class="fas fa-play fa-fw"></i> Continue learning
                                </a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="" ng-click="vm.openResultDetailsModal(result)">
                                    <i class="fas fa-info fa-fw"></i> Details
                                </a>
                                <a class="dropdown-item" href="{{'#!/projects/' + result.project + '/learner/results/' + result.testNo}}">
                                    <i class="fas fa-code-branch fa-fw"></i> Hypotheses
                                </a>
                                <a class="dropdown-item" href="" ng-click="vm.cloneResult(result)">
                                    <i class="fas fa-clone fa-fw"></i> Clone
                                </a>
                                <a class="dropdown-item" href="" ng-click="vm.deleteResult(result)">
                                    <i class="fas fa-trash fa-fw"></i> Delete
                                </a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="" ng-click="vm.showStatistics(result)">
                                    <i class="fas fa-fw fa-chart-bar"></i> Show statistics
                                </a>
                                <a class="dropdown-item" href="" ng-click="vm.exportAsCSV(result)">
                                    <i class="fas fa-fw fa-download"></i> Export statistics
                                </a>
                            </div>
                        </div>
                    </learner-result-list-item>
                </div>
            </div>

            <div class="alert alert-info" ng-if="vm.results.length === 0">
                You have not run any tests yet or the active one is not finished.
            </div>

        </div>
    </div>
</div>
