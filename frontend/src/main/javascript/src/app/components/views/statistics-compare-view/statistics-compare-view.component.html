<div class="view">
    <view-header [title]="'Statistics Compare'">
        <a
          href="{{'#!/projects/' + vm.project.id + '/learner/results'}}"
          class="btn btn-sm btn-default btn-icon"
          uib-tooltip="Back to the list"
          tooltip-placement="right"
        >
            <i class="fas fa-reply"></i>
        </a>
    </view-header>

    <action-bar>
        <div class="btn-group btn-group-sm">
            <button class="btn btn-default" ng-click="vm.switchToFinal()"
                    ng-class="{'active': [vm.chartModes.SINGLE_FINAL,vm.chartModes.MULTIPLE_FINAL].indexOf(vm.chartMode) > -1}">
                <i class="fas fa-fw fa-chart-bar"></i> Cumulated
            </button>
            <button class="btn btn-default" ng-click="vm.switchToComplete()"
                    ng-class="{'active': [vm.chartModes.SINGLE_COMPLETE,vm.chartModes.MULTIPLE_COMPLETE].indexOf(vm.chartMode) > -1}">
                <i class="fas fa-fw fa-chart-line"></i> Complete
            </button>
        </div>

        <button style="margin-left: 4px" class="btn btn-sm btn-default" ng-class="{'active':vm.showInColumns}"
                ng-click="vm.toggleShowInColumns()">
            <i class="fas fa-fw fa-columns"></i>
        </button>
    </action-bar>

    <div class="view-body has-sub-nav">
        <div class="container-fluid">

            <table class="table table-striped">
                <thead>
                <tr>
                    <th>&nbsp;</th>
                    <th>Browser</th>
                    <th>Algorithm</th>
                    <th>|&#931;|</th>
                    <th>Equivalence queries</th>
                </tr>
                </thead>
                <tbody ng-if="!vm.chartData.context.length">
                <tr>
                    <td><strong>Test <span ng-bind="vm.chartData.context.testNo"></span></strong></td>
                    <td>
                        {{vm.chartData.context.driverConfig.name | formatWebBrowser}} ({{vm.chartData.context.driverConfig.width}}px x {{vm.chartData.context.driverConfig.height}}px)
                    </td>
                    <td ng-bind="vm.chartData.context.algorithm.name | formatAlgorithm"></td>
                    <td ng-bind="vm.chartData.context.symbols.length"></td>
                    <td ng-bind="vm.chartData.context.statistics.eqsUsed"></td>
                </tr>
                </tbody>
                <tbody ng-if="vm.chartData.context.length">
                <tr ng-repeat="result in vm.chartData.context">
                    <td><strong>Test <span ng-bind="result.testNo"></span></strong></td>
                    <td>
                        {{result.driverConfig.name | formatWebBrowser}} ({{result.driverConfig.width}}px x {{result.driverConfig.height}}px)
                    </td>
                    <td ng-bind="result.algorithm.name | formatAlgorithm"></td>
                    <td ng-bind="result.symbols.length"></td>
                    <td ng-bind="result.statistics.eqsUsed"></td>
                </tr>
                </tbody>
            </table>

            <hr>

            <div class="row" ng-if="vm.chartData.data != null">
                <div ng-class="vm.showInColumns ? 'col-md-12 col-lg-6' : 'col-sm-12'">

                  <div class="card mb-3" id="chart-eq">
                    <div class="card-header">
                      <strong>Membership queries</strong>
                    </div>
                    <div class="card-body">
                      <div style="width: 100%; height: 450px">
                        <linechart data="vm.chartData.data.mqs" options="vm.chartData.options"></linechart>
                      </div>
                    </div>
                    <div class="card-footer">
                      <button class="btn btn-xs btn-default float-right" ng-click="vm.downloadChart('#chart-eqs')">
                        <i class="fas fa-fw fa-download"></i> Download SVG
                      </button>
                    </div>
                  </div>

                  <div class="card mb-3" id="chart-duration">
                    <div class="card-header">
                      <strong>Duration</strong>
                    </div>
                    <div class="card-body">
                      <div style="width: 100%; height: 450px">
                        <linechart data="vm.chartData.data.duration" options="vm.chartData.options"></linechart>
                      </div>
                    </div>
                    <div class="card-footer">
                      <button class="btn btn-xs btn-default float-right" ng-click="vm.downloadChart('#chart-duration')">
                        <i class="fas fa-fw fa-download"></i> Download SVG
                      </button>
                    </div>
                  </div>

                </div>
                <div ng-class="vm.showInColumns ? 'col-md-12 col-lg-6' : 'col-sm-12'">

                  <div class="card mb-3" id="chart-symbols">
                    <div class="card-header">
                      <strong>Duration</strong>
                    </div>
                    <div class="card-body">
                      <div style="width: 100%; height: 450px">
                        <linechart data="vm.chartData.data.symbols" options="vm.chartData.options"></linechart>
                      </div>
                    </div>
                    <div class="card-footer">
                      <button class="btn btn-xs btn-default float-right" ng-click="vm.downloadChart('#chart-symbols')">
                        <i class="fas fa-fw fa-download"></i> Download SVG
                      </button>
                    </div>
                  </div>

                </div>
            </div>

        </div>

    </div>
</div>
