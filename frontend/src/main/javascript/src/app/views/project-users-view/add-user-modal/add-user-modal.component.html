<div class="modal-header">
  <h4 class="modal-title">Add user to project</h4>
  <a (click)="modal.dismiss()" class="btn btn-icon float-right">
    <i class="fas fa-times fa-fw"></i>
  </a>
</div>

<div class="modal-body">

  <div *ngIf="errorMessage != null" class="alert alert-danger">
    {{errorMessage}}
  </div>

  <form [formGroup]="searchForm" class="search-form">
    <div class="form-group">
      <i class="fa fa-fw fa-search"></i>
      <input [formControl]="searchForm.controls.value" type="text" class="form-control" placeholder="Search for a user">
    </div>
  </form>

  <table class="table">
    <thead>
    <tr>
      <th width="1">&nbsp;</th>
      <th width="1">Username</th>
      <th width="1">Email</th>
      <th></th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let user of filteredUsers$ | async">
      <td>
        <selectable-checkbox
          [item]="user"
          [selectable]="usersSelectable"
        >
        </selectable-checkbox>
      </td>
      <td>{{user.username}}</td>
      <td>{{user.email}}</td>
    </tr>
    </tbody>
  </table>

  <div class="alert alert-info" *ngIf="(filteredUsers$ | async).length === 0">
    No user matches "<em>{{searchForm.controls.value.value}}</em>".
  </div>

</div>

<div class="modal-footer text-right">
  <button [disabled]="!usersSelectable.isAnySelected()" (click)="addUser()" class="btn btn-primary btn-sm">Add Users</button>
  <button (click)="modal.dismiss(); $event.stopPropagation()" class="btn btn-default btn-sm">Cancel</button>
</div>
