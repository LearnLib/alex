<div class="view view-test-reports">
  <view-header [title]="'Test Report'">
    <a
      [href]="'#!/projects/' + project.id + '/tests/reports'"
      class="btn btn-sm btn-default btn-icon"
      ngbTooltip="Back to reports"
      placement="right"
    >
      <i class="fas fa-reply"></i>
    </a>
  </view-header>
  <action-bar>

    <div class="btn-group btn-group-sm mr-2">
      <button class="btn btn-default" (click)="deleteReport()">Delete</button>
    </div>

    <div class="btn-group btn-group-sm">
      <button class="btn btn-default" (click)="downloadReport()">Download</button>
    </div>

  </action-bar>
  <div class="view-body" *ngIf="report != null">
    <div class="container-fluid">

      <h4 class="d-flex">
        <strong>{{report.startDate | date : 'EEE, dd.MM.yyyy, HH:mm'}}</strong>

        <span class="badge badge-secondary ml-auto">
          {{report.environment.name}}
        </span>
      </h4>

      <hr>

      <div class="d-flex justify-content-center">
        <report-charts [report]="report" *ngIf="report != null"></report-charts>
      </div>

      <hr>

      <table class="table table-striped">
        <thead>
        <tr>

          <th>Status</th>
          <th>Name</th>
          <th>Output</th>
          <th>Message</th>
          <th>Time</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let result of report.testResults">
          <ng-container *ngIf="result.test.type === 'case'">
            <td width="1%">
              <span class="badge badge-success" *ngIf="result.passed">Passed</span>
              <span class="badge badge-danger" *ngIf="!result.passed">Failed</span>
            </td>
            <td>
              <a [href]="'#!/projects/' + result.project + '/tests/' + result.test.id">{{result.test.name}}</a>
            </td>
            <td>
              <report-outputs-column [outputs]="result.outputs" [project]="project"></report-outputs-column>
            </td>
            <td>
              <em *ngIf="result.failureMessage">{{result.failureMessage}}</em>
            </td>
            <td style="min-width: 68px">
              {{result.time | formatMilliseconds}}
            </td>
          </ng-container>
        </tr>
        </tbody>
      </table>

    </div>
  </div>
</div>

