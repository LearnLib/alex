<div ng-controller="StatisticsCompareController as vm">
    <view-header title="Statistics Compare">
        <a ui-sref="statistics" class="btn btn-sm btn-default btn-icon"
           tooltip="Back to the list" tooltip-placement="right">
            <i class="fa fa-reply"></i>
        </a>
    </view-header>

    <action-bar>
        <div class="btn-group btn-group-sm">
            <button class="btn btn-default" ng-click="vm.switchToFinal()"
                    ng-class="{'active':vm.selectedChartMode === vm.chartMode.CUMULATED}">
                <i class="fa fa-fw fa-bar-chart"></i> Cumulated
            </button>
            <button class="btn btn-default" ng-click="vm.switchToComplete()"
                    ng-class="{'active':vm.selectedChartMode === vm.chartMode.COMPLETE}">
                <i class="fa fa-fw fa-area-chart"></i> Complete
            </button>
        </div>

        <button style="margin-left: 4px" class="btn btn-sm btn-default" ng-class="{'active':vm.showInColumns}"
                ng-click="vm.toggleShowInColumns()">
            <i class="fa fa-fw fa-columns"></i>
        </button>
    </action-bar>

    <div class="view-body has-sub-nav">
        <div class="alx-container-fluid">

            <div ng-if="vm.selectedChartMode !== null">

                <div ng-if="vm.selectedChartMode === vm.chartMode.CUMULATED && vm.testNos.length === 1">
                    <h3>Test <span ng-bind="vm.chartData.context.testNo"></span> (Cumulated)</h3>
                    <a href="" learn-result-details-modal-handle result="vm.chartData.context">
                        <i class="fa fa-fw fa-info-circle"></i> Details
                    </a>
                    <hr>
                </div>

                <div ng-if="vm.selectedChartMode === vm.chartMode.COMPLETE && vm.testNos.length === 1">
                    <h3>Test <span ng-bind="vm.chartData.context[0].testNo"></span> (All Steps)</h3>
                    <a href="" learn-result-details-modal-handle result="vm.chartData.context[0]">
                        <i class="fa fa-fw fa-info-circle"></i> Details
                    </a>
                    <hr>
                </div>

                <div ng-if="vm.selectedChartMode === vm.chartMode.CUMULATED && vm.testNos.length > 1">
                    <h3>Tests:
                    <span ng-repeat="result in vm.chartData.context">
                        <span ng-bind="result.testNo"></span>,&nbsp;
                    </span> (Cumulated)
                    </h3>
                    <hr>
                </div>

                <div ng-if="vm.selectedChartMode === vm.chartMode.COMPLETE && vm.testNos.length > 1">
                    <h3>Tests:
                    <span ng-repeat="results in vm.chartData.context">
                        <span ng-bind="results[0].testNo"></span>,&nbsp;
                    </span> (All Steps)
                    </h3>
                    <hr>
                </div>

                <div class="row">
                    <div ng-class="vm.showInColumns ? 'col-md-12 col-lg-6' : 'col-xs-12'">
                        <widget title="#Membership Queries" id="chart-eqs">
                            <linechart data="vm.chartData.data.mqs" options="vm.chartData.options"
                                       height="450"></linechart>
                            <hr>
                            <button class="btn btn-xs btn-default pull-right" download-svg="#chart-eqs">
                                <i class="fa fa-fw fa-download"></i> Download SVG
                            </button>
                        </widget>
                        <widget title="Duration (in ms)" id="chart-duration">
                            <linechart data="vm.chartData.data.duration" options="vm.chartData.options"
                                       height="450"></linechart>
                            <hr>
                            <button class="btn btn-xs btn-default pull-right" download-svg="#chart-duration">
                                <i class="fa fa-fw fa-download"></i> Download SVG
                            </button>
                        </widget>
                    </div>
                    <div ng-class="vm.showInColumns ? 'col-md-12 col-lg-6' : 'col-xs-12'">
                        <widget title="#Equivalence Queries" id="chart-mqs">
                            <linechart data="vm.chartData.data.eqs" options="vm.chartData.options"
                                       height="450"></linechart>
                            <hr>
                            <button class="btn btn-xs btn-default pull-right" download-svg="#chart-mqs">
                                <i class="fa fa-fw fa-download"></i> Download SVG
                            </button>
                        </widget>
                        <widget title="|Sigma|" id="chart-sigma">
                            <linechart data="vm.chartData.data.sigma" options="vm.chartData.options"
                                       height="450"></linechart>
                            <hr>
                            <button class="btn btn-xs btn-default pull-right" download-svg="#chart-sigma">
                                <i class="fa fa-fw fa-download"></i> Download SVG
                            </button>
                        </widget>
                    </div>
                    <div ng-class="vm.showInColumns ? 'col-md-12 col-lg-6' : 'col-xs-12'">
                        <widget title="#Symbol Calls" id="chart-symbols">
                            <linechart data="vm.chartData.data.symbols" options="vm.chartData.options"
                                       height="450"></linechart>
                            <hr>
                            <button class="btn btn-xs btn-default pull-right" download-svg="#chart-symbols">
                                <i class="fa fa-fw fa-download"></i> Download SVG
                            </button>
                        </widget>
                    </div>
                </div>
            </div>

            <div ng-if="vm.selectedChartMode === null">
                <div class="alert alert-info">
                    You haven't selected a chart mode.
                </div>
            </div>

        </div>
    </div>
</div>