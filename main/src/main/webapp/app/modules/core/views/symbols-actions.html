<div view-heading
     title="Actions"
     sub-title="Create and manage the actions for symbol: {{symbol.name}}">
    <a class="back-button btn btn-default btn-xs" ui-sref="symbols">
        <i class="fa fa-fw fa-arrow-left"></i>
    </a>
</div>

<div class="sub-nav" fix-on-scroll="{top:115,class:'fixed'}">
    <div class="container">

        <div class="pull-left" style="margin-right: 16px">
            <input type="checkbox" selection-checkbox-all items="symbol.actions">
        </div>

        <div class="btn-group btn-group-xs">
            <button class="btn btn-primary" action-create-modal-handle on-created="addAction">
                Create
            </button>
            <button class="btn btn-default" action-edit-modal-handle action="selectedActions[0]"
                    on-updated="updateAction"
                    ng-class="selectedActions.length !== 1 ? 'disabled': ''">
                Edit
            </button>
            <button class="btn btn-default" ng-click="deleteActions(selectedActions)"
                    ng-class="selectedActions.length === 0 ? 'disabled': ''">
                Delete
            </button>
            <div class="btn-group btn-group-xs" dropdown dropdown-hover>
                <button class="btn btn-default" dropdown-toggle>
                    <i class="fa fa-ellipsis-v fa-fw"></i>
                </button>
                <ul class="dropdown-menu pull-left" role="menu">
                    <li>
                        <a href ng-click="cutActions(selectedActions)">
                            <i class="fa fa-cut fa-fw"></i> Cut
                        </a>
                    </li>
                    <li>
                        <a href ng-click="copyActions(selectedActions)">
                            <i class="fa fa-copy fa-fw"></i> Copy
                        </a>
                    </li>
                    <li>
                        <a href ng-click="pasteActions()">
                            <i class="fa fa-paste fa-fw"></i> Paste
                        </a>
                    </li>
                </ul>
            </div>
        </div>

        <div class="pull-right">
            <button class="btn btn-default btn-xs"
                    variables-counters-occurrence-modal-handle>
                Occurrences
            </button>
            <button class="btn btn-default btn-xs" ng-click="revertChanges()">Reset</button>
            <button class="btn btn-success btn-xs" ng-click="saveChanges()">Save</button>
        </div>

    </div>
</div>

<div class="view-body">
    <div class="container">

        <div class="alert alert-info alert-condensed" ng-show="hasUnsavedChanges">
            <i class="fa fa-fw fa-info"></i> There are unsaved changes made to the symbol
        </div>

        <div ng-if="symbol.actions">
            <div class="action-list" ng-sortable="sortableOptions">
                <div class="action-list-item"
                     ng-class="action.disabled ? 'disabled' : ''"
                     ng-repeat="action in symbol.actions"
                     selection-model
                     selection-model-selected-items="selectedActions">

                        <input type="checkbox" class="pull-left">

                        <div class="action-list-item-content">

                            <div class="btn-group btn-group-xs pull-right" dropdown dropdown-hover>
                                <button type="button" class="btn btn-default btn-icon dropdown-toggle" dropdown-toggle>
                                    <i class="fa fa-bars"></i>
                                </button>
                                <ul class="dropdown-menu pull-left" role="menu">
                                    <li>
                                        <a href action-edit-modal-handle action="action" on-updated="updateAction">
                                            <i class="fa fa-edit fa-fw"></i> Edit
                                        </a>
                                    </li>
                                    <li>
                                        <a href ng-click="deleteActions([action])">
                                            <i class="fa fa-trash fa-fw"></i> Delete
                                        </a>
                                    </li>
                                    <li class="divider"></li>
                                    <li>
                                        <a href ng-click="cutActions([action])">
                                            <i class="fa fa-cut fa-fw"></i> Cut
                                        </a>
                                    </li>
                                    <li>
                                        <a href ng-click="copyActions([action])">
                                            <i class="fa fa-copy fa-fw"></i> Copy
                                        </a>
                                    </li>
                                </ul>
                            </div>

                            <span class="btn btn-xs pull-right" href ng-click="action.disabled = !action.disabled" selection-model-ignore>
                                <span ng-show="!action.disabled" tooltip-placement="bottom" tooltip="Disable" >
                                    <i class="fa fa-toggle-on fa-fw text-success"></i>
                                </span>
                                <span ng-show="action.disabled" tooltip-placement="bottom" tooltip="Enable">
                                    <i class="fa fa-toggle-off fa-fw text-danger"></i>
                                </span>
                            </span>

                            <span class="action-description" ng-bind="action.toString()"></span>

                            <div>
                                <label class="label label-info" ng-show="action.negated">Negate</label>
                                <label class="label label-danger" ng-show="action.ignoreFailure">Ignore Failure</label>
                            </div>

                        </div>
                </div>
            </div>
        </div>

        <div class="alert alert-info" ng-show="symbol.actions.length == 0">
            You haven't created any actions for this symbol yet.
        </div>

    </div>
</div>