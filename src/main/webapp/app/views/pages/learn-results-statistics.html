<div view-heading
     title="Statistics"
     sub-title="Have a look at some numbers we gathered for your tests">
</div>

<div class="sub-nav" fix-on-scroll="{top:124,class:'fixed'}">
    <div class="container">

        <div  ng-show="selectedChartMode === null">

            <div class="pull-left" selectable items="results" style="margin-right: 16px">
                <input type="checkbox" selectable-item-checkbox>
            </div>

            <div class="btn-group btn-group-xs pull-left" dropdown dropdown-hover>
                <button class="btn btn-primary">
                    Create Chart
                </button>
                <ul class="dropdown-menu" role="menu">
                    <li>
                        <a href ng-click="createChartFromFinalResults()">
                            <i class="fa fa-fw fa-bar-chart"></i> Final Results
                        </a>
                    </li>
                    <li>
                        <a href ng-click="createChartFromCompleteResults()">
                            <i class="fa fa-fw fa-area-chart"></i> Complete Results
                        </a>
                    </li>
                </ul>
            </div>

            <div class="btn-group btn-group-xs pull-right" dropdown dropdown-hover>
                <button class="btn btn-default">
                    <i class="fa fa-fw fa-download"></i> Download as *.csv
                </button>
                <ul class="dropdown-menu" role="menu">
                    <li>
                        <a href download-learner-results-as-csv results="results">
                            All Final Results
                        </a>
                    </li>
                </ul>
            </div>

        </div>

        <div ng-show="selectedChartMode !== null">

            <div class="pull-left">
                <button class="btn btn-default btn-xs" ng-click="back()">
                    <i class="fa fa-reply fa-fw"></i> Back
                </button>
            </div>

            <div class="pull-right">
                <button class="btn btn-default btn-xs" download-svg="#learn-result-chart">
                    <i class="fa fa-download fa-fw"></i> Download as *.svg
                </button>
                <button class="btn btn-default btn-xs" ng-click="fullWidth = !fullWidth" dispatch-resize="20">
                    <i class="fa fa-fw" ng-class="fullWidth ? 'fa-compress' : 'fa-expand'"></i>
                </button>
            </div>

        </div>

    </div>
</div>

<div class="view-body">
    <div class="container" ng-style="fullWidth ? {'width':'100%'} : {}">

        <div selectable items="results" ng-if="selectedChartMode === null">
            <div selectable-list>
                <div selectable-list-item ng-repeat="result in results track by $index">

                    <strong>Test No
                        <span ng-bind="result.testNo"></span>
                    </strong>,
                    [<span ng-bind="(result.configuration.algorithm|formatEnumKey)"></span>]

                    <div class="text-muted">
                        Started: <span ng-bind="(result.startTime | date : 'EEE, dd.MM.yyyy, HH:mm')"></span>
                    </div>

                </div>
            </div>
        </div>

        <div ng-if="selectedChartMode !== null && chartData.data !== null && chartData.options !== null"
             id="learn-result-chart">

            <linechart data="chartData.data" options="chartData.options" mode="" width="" height="500"></linechart>
            <hr>

            <div class="text-center">
                <button class="btn btn-xs"
                        ng-class="selectedChartProperty === chartProperties.RESETS ? 'btn-primary':'btn-default'"
                        ng-click="selectChartProperty(chartProperties.RESETS)">
                    #Resets
                </button>
                <button class="btn btn-xs"
                        ng-class="selectedChartProperty === chartProperties.SYMBOLS ? 'btn-primary':'btn-default'"
                        ng-click="selectChartProperty(chartProperties.SYMBOLS)">
                    #Symbols
                </button>
                <button class="btn btn-xs"
                        ng-class="selectedChartProperty === chartProperties.DURATION ? 'btn-primary':'btn-default'"
                        ng-click="selectChartProperty(chartProperties.DURATION)">
                    Duration
                </button>
            </div>

        </div>

    </div>
</div>