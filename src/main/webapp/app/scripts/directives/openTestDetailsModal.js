(function () {

    angular
        .module('weblearner.directives')
        .directive('openTestDetailsModal', [
            '$modal', 'paths',
            openTestDetailsModal
        ]);

    function openTestDetailsModal($modal, paths) {

        var directive = {
            scope: {
                test: '='
            },
            link: link
        };
        return directive;

        //////////

        function link(scope, el, attrs) {

            el.on('click', handleModal);

            function handleModal() {
                if (angular.isDefined(scope.test)) {
                    $modal.open({
                        templateUrl: paths.views.MODALS + '/modal-test-details.html',
                        controller: 'TestDetailsController',
                        resolve: {
                            modalData: function () {
                                return {
                                    test: angular.copy(scope.test)
                                }
                            }
                        }
                    })
                }
            }
        }
    }
}());